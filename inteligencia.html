<!doctype html>

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Deoleo. Líder Mundial del Aceite de Oliva</title>
    <!-- Favicon icon -->
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="./images/favicon.png"
    />
    <link
      href="./vendor/pg-calendar/css/pignose.calendar.min.css"
      rel="stylesheet"
    />
    <link href="./vendor/chartist/css/chartist.min.css" rel="stylesheet" />
    <link href="./css/style.css" rel="stylesheet" />
    
    <!-- Estilos adicionales para el chat interactivo -->
    <style>
      /* Indicador de que la IA está escribiendo */
      .typing-indicator {
        display: none;
        margin-left: 0;
        margin-bottom: 20px;
      }
      
      .typing-indicator.active {
        display: block;
      }
      
      .typing-dots {
        display: inline-flex;
        background: #0f5c00;
        color: white;
        padding: 15px;
        border-radius: 15px;
        max-width: 80%;
      }
      
      .typing-dots span {
        width: 8px;
        height: 8px;
        background-color: rgba(255, 255, 255, 0.7);
        border-radius: 50%;
        display: inline-block;
        margin: 0 2px;
        animation: typing 1.5s infinite ease-in-out;
      }
      
      .typing-dots span:nth-child(1) {
        animation-delay: 0s;
      }
      
      .typing-dots span:nth-child(2) {
        animation-delay: 0.2s;
      }
      
      .typing-dots span:nth-child(3) {
        animation-delay: 0.4s;
      }
      
      @keyframes typing {
        0%, 60%, 100% {
          transform: translateY(0);
          background-color: rgba(255, 255, 255, 0.7);
        }
        30% {
          transform: translateY(-5px);
          background-color: white;
        }
      }
      
      /* Efecto para los botones de sugerencia */
      .suggestion-btn {
        transition: all 0.3s ease;
        cursor: pointer;
      }
      
      .suggestion-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }
      
      /* Mejoras para el área del chat */
      .chat-container {
        display: flex;
        flex-direction: column;
      }
      
      .chat-messages {
        flex: 1;
        overflow-y: auto;
      }
      
      /* Estilo para mensajes nuevos */
      .chat-message.new {
        animation: fadeIn 0.5s ease;
      }
      
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }
      
      /* Mejora para el input */
      #messageInput:focus {
        box-shadow: 0 0 0 3px rgba(15, 92, 0, 0.1);
        border-color: #0a4700;
      }
    </style>
  </head>

  <body>
    <!--*******************
        Preloader start
    ********************-->
    <div id="preloader">
      <div class="sk-three-bounce">
        <div class="sk-child sk-bounce1"></div>
        <div class="sk-child sk-bounce2"></div>
        <div class="sk-child sk-bounce3"></div>
      </div>
    </div>
    <!--*******************
        Preloader end
    ********************-->

    <!--**********************************
        Main wrapper start
    ***********************************-->
    <div id="main-wrapper">
      <!--**********************************
            Nav header start
        ***********************************-->
      <div
        class="nav-header"
        style="
          background: #52525c;
          padding: 15px 20px;
          border-bottom: 2px solid #fdfdfd;
        "
      >
        <a href="dasboard.html" class="brand-logo">
          <img
            src="./images/logogris.webp"
            alt="Deoleo"
            style="width: 160px; filter: brightness(3.5) contrast(0.8)"
          />
        </a>
      </div>
      <!--**********************************
            Nav header end
        ***********************************-->

      <!--**********************************
            Header start
        ***********************************-->
      <div class="header">
        <div class="header-content">
          <nav class="navbar navbar-expand">
            <div class="collapse navbar-collapse justify-content-between">
              <div class="header-left">
                <div class="search_bar dropdown">
                  <span
                    class="search_icon p-3 c-pointer"
                    data-toggle="dropdown"
                  >
                    <i class="mdi mdi-magnify"></i>
                  </span>
                  <div class="dropdown-menu p-0 m-0">
                    <form>
                      <input
                        class="form-control"
                        type="search"
                        placeholder="Buscar empleado..."
                        aria-label="Search"
                      />
                    </form>
                  </div>
                </div>
              </div>

              <ul class="navbar-nav header-right">
                <li class="nav-item dropdown notification_dropdown">
                  <a
                    class="nav-link"
                    href="#"
                    role="button"
                    data-toggle="dropdown"
                  >
                    <i class="mdi mdi-bell"></i>
                    <div class="pulse-css"></div>
                  </a>
                  <div class="dropdown-menu dropdown-menu-right">
                    <ul class="list-unstyled">
                      <li class="media dropdown-item">
                        <span class="success"><i class="ti-user"></i></span>
                        <div class="media-body">
                          <a href="#">
                            <p>
                              <strong>Nuevo contrato</strong> para Carlos Ruiz
                              en IT
                            </p>
                          </a>
                        </div>
                        <span class="notify-time">10:30 am</span>
                      </li>
                      <li class="media dropdown-item">
                        <span class="primary"><i class="ti-calendar"></i></span>
                        <div class="media-body">
                          <a href="#">
                            <p>
                              <strong>Solicitud de vacaciones</strong> de Laura
                              Méndez
                            </p>
                          </a>
                        </div>
                        <span class="notify-time">09:15 am</span>
                      </li>
                      <li class="media dropdown-item">
                        <span class="danger"><i class="ti-alert"></i></span>
                        <div class="media-body">
                          <a href="#">
                            <p>
                              <strong>Incidencia reportada</strong> baja médica
                            </p>
                          </a>
                        </div>
                        <span class="notify-time">08:45 am</span>
                      </li>
                      <li class="media dropdown-item">
                        <span class="primary"><i class="ti-book"></i></span>
                        <div class="media-body">
                          <a href="#">
                            <p>
                              <strong>Formación completada</strong> por 15
                              empleados
                            </p>
                          </a>
                        </div>
                        <span class="notify-time">Ayer</span>
                      </li>
                      <li class="media dropdown-item">
                        <span class="success"><i class="ti-email"></i></span>
                        <div class="media-body">
                          <a href="#">
                            <p>
                              <strong>Evaluación de desempeño</strong> pendiente
                              de revisión
                            </p>
                          </a>
                        </div>
                        <span class="notify-time">Ayer</span>
                      </li>
                    </ul>
                    <a class="all-notification" href="#"
                      >Ver todas las notificaciones
                      <i class="ti-arrow-right"></i
                    ></a>
                  </div>
                </li>
                <li class="nav-item dropdown header-profile">
                  <a
                    class="nav-link"
                    href="#"
                    role="button"
                    data-toggle="dropdown"
                  >
                    <i class="mdi mdi-account"></i>
                  </a>
                  <div class="dropdown-menu dropdown-menu-right">
                    <a href="#" class="dropdown-item">
                      <i class="icon-user"></i>
                      <span class="ml-2">Mi Perfil</span>
                    </a>
                    <a href="#" class="dropdown-item">
                      <i class="icon-envelope-open"></i>
                      <span class="ml-2">Mensajes</span>
                    </a>
                    <a href="#" class="dropdown-item">
                      <i class="icon-settings"></i>
                      <span class="ml-2">Configuración</span>
                    </a>
                    <a href="#" class="dropdown-item">
                      <i class="icon-key"></i>
                      <span class="ml-2">Cerrar Sesión</span>
                    </a>
                  </div>
                </li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
      <!--**********************************
            Header end ti-comment-alt
        ***********************************-->

      <!--**********************************
            Sidebar start
        ***********************************-->
      <div class="quixnav">
        <div class="quixnav-scroll">
          <ul class="metismenu" id="menu">
            <li class="nav-label first"></li>

            <li>
              <a href="dasboard.html" aria-expanded="false">
                <i class="icon icon-single-04"></i>
                <span class="nav-text">Dashboard</span>
              </a>
            </li>
            <li class="nav-label">INTELIGENCIA ARTIFICIAL</li>
            <li>
              <a href="inteligencia.html" aria-expanded="false">
                <i class="icon icon-world-2"></i>
                <span class="nav-text">Asistente Virtual RRHH</span>
              </a>
            </li>
            <li class="nav-label">ANALTICS</li>
            <li>
              <a href="kpis.html" aria-expanded="false">
                <i class="icon icon-world-2"></i>
                <span class="nav-text">KPIs interactivos</span>
              </a>
            </li>
            <li class="nav-label">CENTRO DE ALERTAS</li>
            <li>
              <a href="alertas.html" aria-expanded="false">
                <i class="icon icon-world-2"></i>
                <span class="nav-text">Alertas</span>
              </a>
            </li>

            <li class="nav-label">Configuración</li>
            <li>
              <a
                class="has-arrow"
                href="javascript:void()"
                aria-expanded="false"
              >
                <i class="icon icon-layout-25"></i>
                <span class="nav-text">Configuración</span>
              </a>
              <ul aria-expanded="false">
                <li><a href="gestion-departamentos.html">Departamentos</a></li>
                <li><a href="gestion-usuarios.html">Gestión de Usuarios</a></li>
              </ul>
            </li>

            <li class="nav-label">Administración Sistema</li>
            <li>
              <a
                class="has-arrow"
                href="javascript:void()"
                aria-expanded="false"
              >
                <i class="icon icon-single-copy-06"></i>
                <span class="nav-text">Gobierno de Datos</span>
              </a>
              <ul aria-expanded="false">
                <li><a href="trazabilidad.html">Trazabilidad y Logs</a></li>
                <li>
                  <a href="fuentes-origen.html">Fuentes de Origen (API)</a>
                </li>
              </ul>
            </li>
            <li>
              <a
                class="has-arrow"
                href="javascript:void()"
                aria-expanded="false"
              >
                <i class="icon icon-app-store"></i>
                <span class="nav-text">Empleados</span>
              </a>
              <ul aria-expanded="false">
                <li><a href="#">Lista de Empleados</a></li>
                <li><a href="#">Fichas Personales</a></li>
                <li>
                  <a
                    class="has-arrow"
                    href="javascript:void()"
                    aria-expanded="false"
                    >Contratos</a
                  >
                  <ul aria-expanded="false">
                    <li><a href="#">Nuevo Contrato</a></li>
                    <li><a href="#">Contratos Activos</a></li>
                    <li><a href="#">Renovaciones</a></li>
                  </ul>
                </li>
                <li><a href="#">Bajas y Altas</a></li>
              </ul>
            </li>

            <li>
              <a
                class="has-arrow"
                href="javascript:void()"
                aria-expanded="false"
              >
                <i class="icon icon-calendar-60"></i>
                <span class="nav-text">Ausencias</span>
              </a>
              <ul aria-expanded="false">
                <li><a href="#">Vacaciones</a></li>
                <li><a href="#">Bajas Médicas</a></li>
                <li><a href="#">Permisos</a></li>
                <li><a href="#">Calendario</a></li>
              </ul>
            </li>

            <li class="nav-label">Nóminas y Retribución</li>
            <li>
              <a
                class="has-arrow"
                href="javascript:void()"
                aria-expanded="false"
              >
                <i class="icon icon-chart-bar-33"></i>
                <span class="nav-text">Nóminas</span>
              </a>
              <ul aria-expanded="false">
                <li><a href="#">Generar Nóminas</a></li>
                <li><a href="#">Histórico</a></li>
                <li><a href="#">Incentivos</a></li>
                <li><a href="#">Retribución Flexible</a></li>
              </ul>
            </li>

            <li>
              <a
                class="has-arrow"
                href="javascript:void()"
                aria-expanded="false"
              >
                <i class="icon icon-money-coins"></i>
                <span class="nav-text">Compensación</span>
              </a>
              <ul aria-expanded="false">
                <li><a href="#">Estructura Salarial</a></li>
                <li><a href="#">Beneficios</a></li>
                <li><a href="#">Bonos</a></li>
              </ul>
            </li>

            <li class="nav-label">Desarrollo y Formación</li>
            <li>
              <a
                class="has-arrow"
                href="javascript:void()"
                aria-expanded="false"
              >
                <i class="icon icon-world-2"></i>
                <span class="nav-text">Formación</span>
              </a>
              <ul aria-expanded="false">
                <li><a href="#">Plan de Formación</a></li>
                <li><a href="#">Cursos Disponibles</a></li>
                <li><a href="#">Seguimiento</a></li>
                <li><a href="#">Certificaciones</a></li>
              </ul>
            </li>

            <li>
              <a
                class="has-arrow"
                href="javascript:void()"
                aria-expanded="false"
              >
                <i class="icon icon-single-copy-06"></i>
                <span class="nav-text">Evaluación</span>
              </a>
              <ul aria-expanded="false">
                <li><a href="#">Desempeño</a></li>
                <li><a href="#">Objetivos</a></li>
                <li><a href="#">Competencias</a></li>
              </ul>
            </li>

            <li class="nav-label">Procesos RRHH</li>
            <li>
              <a
                class="has-arrow"
                href="javascript:void()"
                aria-expanded="false"
              >
                <i class="icon icon-plug"></i>
                <span class="nav-text">Reclutamiento</span>
              </a>
              <ul aria-expanded="false">
                <li><a href="#">Ofertas de Empleo</a></li>
                <li><a href="#">Candidatos</a></li>
                <li><a href="#">Entrevistas</a></li>
                <li><a href="#">Onboarding</a></li>
              </ul>
            </li>

            <li>
              <a
                class="has-arrow"
                href="javascript:void()"
                aria-expanded="false"
              >
                <i class="icon icon-form"></i>
                <span class="nav-text">Documentación</span>
              </a>
              <ul aria-expanded="false">
                <li><a href="#">Contratos</a></li>
                <li><a href="#">Certificados</a></li>
                <li><a href="#">Informes</a></li>
                <li><a href="#">Plantillas</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
      <!--**********************************
            Sidebar end
        ***********************************-->

      <!--**********************************
            Content body start
        ***********************************-->
      <div class="content-body">
        <div class="container-fluid">
          <div class="row page-titles mx-0">
            <div class="col-sm-6 p-md-0">
              <div class="welcome-text">
                <h4 style="color: #0f5c00">
                  ¡Hola, bienvenido!
                </h4>
                
              </div>
            </div>
            <div
              class="col-sm-6 p-md-0 justify-content-sm-end mt-2 mt-sm-0 d-flex"
            >
              <ol class="breadcrumb">
                <li class="breadcrumb-item active">
                  <a href="javascript:void(0)">Dashboard RRHH</a>
                </li>
                <li class="breadcrumb-item">
                  <a href="javascript:void(0)">Inteligencia Artificial</a>
                </li>
              </ol>
            </div>
          </div>

          <div class="row">
            <div class="col-lg-12">
              <div class="card">
                <div class="card-header">
                  <h4 class="card-title">Asistente Virtual RRHH</h4>
                </div>
                <div class="card-body">
                  <div
                    class="chat-container"
                    style="
                      height: 1000px;
                      overflow-y: auto;
                      border: 1px solid #e0e0e0;
                      border-radius: 10px;
                      padding: 20px;
                      background-color: #f8f9fa;
                      display: flex;
                      flex-direction: column;
                    "
                  >
                    <!-- Área de mensajes -->
                    <div class="chat-messages" style="flex: 1; overflow-y: auto;">
                      <!-- Mensaje del asistente -->
                      <div class="chat-message assistant-message mb-4 new">
                        <div
                          class="message-bubble"
                          style="
                            background: #e7e8eb;
                            color: black;
                            padding: 15px;
                            border-radius: 15px;
                            max-width: 80%;
                            margin-left: 0;
                          "
                        >
                          <div
                            class="message-header"
                            style="font-weight: bold; margin-bottom: 5px"
                          >
                            <i class="ti-robot"></i> Asistente RRHH
                          </div>
                          <div class="message-content">
                            ¡Hola Juan! Soy tu asistente virtual de Recursos
                            Humanos. ¿En qué puedo ayudarte hoy? Puedo asistirte
                            con:
                            <br /><br />
                            • Consultas sobre empleados<br />
                            • Información de nóminas<br />
                            • Gestión de vacaciones<br />
                            • Procesos de contratación<br />
                            • Y mucho más...
                          </div>
                          <div
                            class="message-time"
                            style="font-size: 11px; opacity: 0.8; margin-top: 5px"
                          >
                            <span class="time">10:30 AM</span>
                          </div>
                        </div>
                      </div>

                      <!-- Mensaje del usuario (ejemplo) -->
                      <div class="chat-message user-message mb-4 new">
                        <div
                          class="message-bubble"
                          style="
                            background: #e7e8eb;
                            color: #333;
                            padding: 15px;
                            border-radius: 15px;
                            max-width: 80%;
                            margin-left: auto;
                            margin-right: 0;
                          "
                        >
                          <div
                            class="message-header"
                            style="
                              font-weight: bold;
                              margin-bottom: 5px;
                              text-align: right;
                            "
                          >
                            Juan Moleres <i class="ti-user"></i>
                          </div>
                          <div class="message-content">
                            Hola, ¿puedes mostrarme el número total de empleados
                            activos?
                          </div>
                          <div
                            class="message-time"
                            style="
                              font-size: 11px;
                              opacity: 0.8;
                              margin-top: 5px;
                              text-align: right;
                            "
                          >
                            <span class="time">10:32 AM</span>
                          </div>
                        </div>
                      </div>

                      <!-- Respuesta del asistente (ejemplo) -->
                      <div class="chat-message assistant-message mb-4 new">
                        <div
                          class="message-bubble"
                          style="
                            background: #e7e8eb;
                            color: black;
                            padding: 15px;
                            border-radius: 15px;
                            max-width: 80%;
                            margin-left: 0;
                          "
                        >
                          <div
                            class="message-header"
                            style="font-weight: bold; margin-bottom: 5px"
                          >
                            <i class="ti-robot"></i> Asistente RRHH
                          </div>
                          <div class="message-content">
                            ¡Por supuesto! Actualmente tienes
                            <strong>247 empleados activos</strong> en la empresa.
                            <br /><br />
                            Desglose por departamentos:
                            <br />
                            • Producción: 85 empleados<br />
                            • Ventas: 45 empleados<br />
                            • IT: 35 empleados<br />
                            • Marketing: 42 empleados<br />
                            • Calidad: 40 empleados
                          </div>
                          <div
                            class="message-time"
                            style="font-size: 11px; opacity: 0.8; margin-top: 5px"
                          >
                            <span class="time">10:32 AM</span>
                          </div>
                        </div>
                      </div>

                      <!-- Indicador de que la IA está escribiendo -->
                      <div class="typing-indicator mb-4" id="typingIndicator">
                        <div class="typing-dots">
                          <span></span>
                          <span></span>
                          <span></span>
                        </div>
                      </div>
                    </div>

                    <!-- Área de escritura -->
                    <div class="chat-input mt-4" style="flex-shrink: 0;">
                      <div class="input-group">
                        <input
                          type="text"
                          class="form-control"
                          id="messageInput"
                          placeholder="Escribe tu mensaje aquí..."
                          style="
                            border: 1px solid #e7e8eb;;
                            border-radius: 25px;
                            padding: 15px 20px;
                          "
                        />
                        <div class="input-group-append">
                          <button
                            class="btn btn-primary"
                            id="sendButton"
                            type="button"
                            style="
                              background: #e7e8eb;;
                              border-color: #e7e8eb;;
                              border-radius: 25px;
                              padding: 15px 25px;
                            "
                          >
                            <i class="ti-arrow-right"></i>
                          </button>
                        </div>
                      </div>
                      <div class="suggestions mt-2 text-center">
                        <small class="text-muted">Sugerencias rápidas: </small>
                        <button
                          class="btn btn-outline-light  mx-1 suggestion-btn"
                          style="border-color: #e7e8eb;; color: black;"
                          data-question="¿Cuál es el estado de las nóminas?"
                        >
                          Estado nóminas
                        </button>
                        <button
                          class="btn btn-outline-light mx-1 suggestion-btn"
                          style="border-color: #e7e8eb;; color: black;"
                          data-question="¿Hay nuevas contrataciones?"
                        >
                          Contrataciones
                        </button>
                        <button
                          class="btn btn-sm btn-outline-light mx-1 suggestion-btn"
                          style="border-color: #e7e8eb;; color: black;"
                          data-question="¿Qué formaciones hay programadas?"
                        >
                          Formaciones
                        </button>
                        <button
                          class="btn btn-sm btn-outline-light mx-1 suggestion-btn"
                          style="border-color: #e7e8eb;; color: black;"
                          data-question="¿Cuántas bajas médicas hay activas?"
                        >
                          Bajas médicas
                        </button>
                        <button
                          class="btn btn-sm btn-outline-light mx-1 suggestion-btn"
                          style="border-color: #e7e8eb;; color: black;"
                          data-question="¿Cuántos empleados hay por departamento?"
                        >
                          Por departamento
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!--**********************************
            Content body end
        ***********************************-->

      <!--**********************************
            Footer start
        ***********************************-->
      <div class="footer">
        <div class="copyright">
          <div class="d-flex align-items-center justify-content-center">
            <p class="mb-0">© 2026 Deoleo S.A. - Sistema de Recursos Humanos</p>
          </div>
          <p class="mt-2 mb-0">
            <small>
              <a href="#" style="color: #0f5c00">Política de Privacidad</a> |
              <a href="#" style="color: #0f5c00">Aviso Legal</a>
            </small>
          </p>
        </div>
      </div>
      <!--**********************************
            Footer end
        ***********************************-->

      <!--**********************************
           Support ticket button start
        ***********************************-->

      <!--**********************************
           Support ticket button end
        ***********************************-->
    </div>
    <!--**********************************
        Main wrapper end
    ***********************************-->

    <!--**********************************
        Scripts
    ***********************************-->
    <!-- Required vendors -->
    <script src="./vendor/global/global.min.js"></script>
    <script src="./js/quixnav-init.js"></script>
    <script src="./js/custom.min.js"></script>

    <script src="./vendor/chartist/js/chartist.min.js"></script>

    <script src="./vendor/moment/moment.min.js"></script>
    <script src="./vendor/pg-calendar/js/pignose.calendar.min.js"></script>

    <script src="./js/dashboard/dashboard-2.js"></script>
    
    <!-- Script para el chat interactivo -->
    <script>
      // Base de conocimiento de la IA
      const knowledgeBase = {
        // Empleados
        "empleados activos": {
          respuesta: "Actualmente hay <strong>247 empleados activos</strong> en la empresa.<br><br>Desglose por departamentos:<br>• Producción: 85 empleados<br>• Ventas: 45 empleados<br>• IT: 35 empleados<br>• Marketing: 42 empleados<br>• Calidad: 40 empleados"
        },
        "empleados por departamento": {
          respuesta: "Distribución de empleados por departamento:<br><br>• Producción: 85 empleados<br>• Ventas: 45 empleados<br>• IT: 35 empleados<br>• Marketing: 42 empleados<br>• Calidad: 40 empleados<br>• RRHH: 12 empleados<br>• Finanzas: 18 empleados<br>• Logística: 22 empleados"
        },
        "contrataciones": {
          respuesta: "Actualmente hay <strong>3 nuevas contrataciones en proceso</strong>.<br><br>Detalles:<br>• Desarrollador Full-Stack (IT) - 2 candidatos en fase final<br>• Representante de Ventas (Ventas) - 3 candidatos en proceso<br>• Técnico de Calidad (Calidad) - 1 candidato seleccionado<br><br>Próximas entrevistas: 5 para la próxima semana."
        },
        
        // Vacaciones
        "vacaciones pendientes": {
          respuesta: "Hay <strong>8 solicitudes de vacaciones pendientes</strong> de aprobación.<br><br>Detalle de solicitudes:<br>• Laura Méndez (Marketing) - 5 días (del 15 al 19 de julio)<br>• Carlos Ruiz (IT) - 3 días (del 22 al 24 de julio)<br>• Ana Torres (Ventas) - 7 días (del 5 al 13 de agosto)<br>• Miguel Ángel (Producción) - 10 días (del 1 al 12 de agosto)<br>• Elena Castro (Calidad) - 4 días (del 8 al 11 de julio)<br>• Pedro Sánchez (IT) - 6 días (del 20 al 25 de agosto)<br>• Marta Rodríguez (Ventas) - 3 días (del 10 al 12 de septiembre)<br>• Luis Fernández (Producción) - 5 días (del 15 al 19 de julio)"
        },
        "solicitudes de vacaciones": {
          respuesta: "Hay <strong>8 solicitudes de vacaciones pendientes</strong> de aprobación.<br><br>Detalle de solicitudes:<br>• Laura Méndez (Marketing) - 5 días (del 15 al 19 de julio)<br>• Carlos Ruiz (IT) - 3 días (del 22 al 24 de julio)<br>• Ana Torres (Ventas) - 7 días (del 5 al 13 de agosto)<br>• Miguel Ángel (Producción) - 10 días (del 1 al 12 de agosto)<br>• Elena Castro (Calidad) - 4 días (del 8 al 11 de julio)"
        },
        
        // Nóminas
        "estado nóminas": {
          respuesta: "Las nóminas del mes de junio están <strong>procesadas al 100%</strong>.<br><br>Detalles:<br>• Total nóminas: 247<br>• Nóminas pagadas: 247<br>• Importe total: €1,245,320<br>• Nóminas pendientes: 0<br><br>Las nóminas de julio están programadas para el día 30. El proceso de cálculo comenzará el 25 de julio."
        },
        "nóminas": {
          respuesta: "Estado actual de nóminas:<br><br>• Junio: Completadas (100%)<br>• Julio: Programadas para el 30 de julio<br>• Agosto: En preparación<br><br>Próximos vencimientos:<br>• Pago de nóminas: 30 de julio<br>• Declaraciones fiscales: 20 de julio<br>• Pagos a la Seguridad Social: 25 de julio"
        },
        
        // Formación
        "formaciones": {
          respuesta: "Actualmente hay <strong>12 formaciones programadas</strong> para los próximos meses.<br><br>Próximas formaciones:<br>• Liderazgo Efectivo (20-21 julio) - 15 plazas<br>• Seguridad Informática (25-26 julio) - 20 plazas<br>• Gestión del Tiempo (1-2 agosto) - 25 plazas<br>• Excel Avanzado (5-6 agosto) - 18 plazas<br>• Comunicación Asertiva (10-11 agosto) - 20 plazas<br>• Prevención de Riesgos (15-16 agosto) - 30 plazas"
        },
        "formaciones programadas": {
          respuesta: "Próximas formaciones programadas:<br><br>1. <strong>Liderazgo Efectivo</strong><br>   - Fechas: 20-21 de julio<br>   - Plazas: 15/15 (completo)<br>   - Formador: Dra. Elena Martínez<br><br>2. <strong>Seguridad Informática</strong><br>   - Fechas: 25-26 de julio<br>   - Plazas: 18/20 disponibles<br>   - Formador: Ing. Carlos López<br><br>3. <strong>Gestión del Tiempo</strong><br>   - Fechas: 1-2 de agosto<br>   - Plazas: 22/25 disponibles<br>   - Formador: Coach Ana Torres"
        },
        
        // Incidencias y bajas
        "bajas médicas": {
          respuesta: "Actualmente hay <strong>2 bajas médicas activas</strong>:<br><br>• Roberto Díaz (IT) - Baja por enfermedad común (hasta el 15 de julio)<br>• Carmen Vidal (Producción) - Accidente laboral (hasta el 20 de julio)<br><br>Bajas recientemente finalizadas:<br>• Javier Gómez (Ventas) - Finalizada el 10 de julio<br>• María López (Marketing) - Finalizada el 5 de julio"
        },
        "incidencias": {
          respuesta: "Actualmente hay <strong>3 incidencias activas</strong> en el sistema:<br><br>• Baja médica de Roberto Díaz (IT) - hasta el 15 de julio<br>• Equipo defectuoso en Producción - reportado hoy<br>• Problema de acceso al sistema de nóminas - resuelto<br><br>Incidencias resueltas en los últimos 7 días: 8"
        },
        
        // Por defecto
        "default": {
          respuesta: "He entendido que preguntas sobre <strong>\"{query}\"</strong>. Como asistente de RRHH, puedo ayudarte con:<br><br>• Información sobre empleados (activos, por departamento)<br>• Estado de nóminas y pagos<br>• Gestión de vacaciones y ausencias<br>• Formaciones y desarrollo profesional<br>• Procesos de contratación<br>• Incidencias y bajas médicas<br><br>¿Puedes reformular tu pregunta para que pueda darte una respuesta más precisa?"
        }
      };

      // Elementos del DOM
      const chatMessages = document.querySelector('.chat-messages');
      const messageInput = document.getElementById('messageInput');
      const sendButton = document.getElementById('sendButton');
      const typingIndicator = document.getElementById('typingIndicator');
      const suggestionButtons = document.querySelectorAll('.suggestion-btn');

      // Función para obtener la hora actual
      function getCurrentTime() {
        const now = new Date();
        let hours = now.getHours();
        let minutes = now.getMinutes();
        const ampm = hours >= 12 ? 'PM' : 'AM';
        hours = hours % 12;
        hours = hours ? hours : 12;
        minutes = minutes < 10 ? '0' + minutes : minutes;
        return `${hours}:${minutes} ${ampm}`;
      }

      // Función para crear un elemento de mensaje
      function createMessageElement(content, isUser = false) {
        const messageDiv = document.createElement('div');
        messageDiv.className = `chat-message ${isUser ? 'user' : 'assistant'}-message mb-4 new`;
        
        const messageBubble = document.createElement('div');
        messageBubble.style.cssText = `
          background: ${isUser ? '#e7e8eb;' : '#E7E8EB'};
          color: ${isUser ? '#333' : 'black'};
          padding: 15px;
          border-radius: 15px;
          max-width: 80%;
          ${isUser ? 'margin-left: auto; margin-right: 0;' : 'margin-left: 0;'}
        `;
        
        const messageHeader = document.createElement('div');
        messageHeader.style.cssText = `
          font-weight: bold;
          margin-bottom: 5px;
          ${isUser ? 'text-align: right;' : ''}
        `;
        
        if (isUser) {
          messageHeader.innerHTML = 'Juan Moleres <i class="ti-user"></i>';
        } else {
          messageHeader.innerHTML = '<i class="ti-robot"></i> Asistente RRHH';
        }
        
        const messageContent = document.createElement('div');
        messageContent.className = 'message-content';
        messageContent.innerHTML = content;
        
        const messageTime = document.createElement('div');
        messageTime.style.cssText = `
          font-size: 11px;
          opacity: 0.8;
          margin-top: 5px;
          ${isUser ? 'text-align: right;' : ''}
        `;
        
        const timeSpan = document.createElement('span');
        timeSpan.className = 'time';
        timeSpan.textContent = getCurrentTime();
        messageTime.appendChild(timeSpan);
        
        messageBubble.appendChild(messageHeader);
        messageBubble.appendChild(messageContent);
        messageBubble.appendChild(messageTime);
        messageDiv.appendChild(messageBubble);
        
        return messageDiv;
      }

      // Función para desplazar al final del chat
      function scrollToBottom() {
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }

      // Función para encontrar respuesta en la base de conocimiento
      function findResponse(query) {
        query = query.toLowerCase().trim();
        
        // Buscar coincidencias exactas o parciales
        for (const key in knowledgeBase) {
          if (query.includes(key)) {
            return knowledgeBase[key].respuesta;
          }
        }
        
        // Si no encuentra, usar respuesta por defecto
        return knowledgeBase.default.respuesta.replace("{query}", query);
      }

      // Función para mostrar el indicador de escritura
      function showTypingIndicator() {
        typingIndicator.classList.add('active');
        scrollToBottom();
      }

      // Función para ocultar el indicador de escritura
      function hideTypingIndicator() {
        typingIndicator.classList.remove('active');
      }

      // Función para procesar el mensaje del usuario
      function processUserMessage(message) {
        // Añadir mensaje del usuario
        const userMessageElement = createMessageElement(message, true);
        chatMessages.appendChild(userMessageElement);
        scrollToBottom();
        
        // Mostrar que la IA está escribiendo
        showTypingIndicator();
        
        // Simular tiempo de respuesta (1-2 segundos)
        setTimeout(() => {
          // Ocultar indicador de escritura
          hideTypingIndicator();
          
          // Obtener respuesta
          const response = findResponse(message);
          
          // Añadir respuesta de la IA
          const assistantMessageElement = createMessageElement(response, false);
          chatMessages.appendChild(assistantMessageElement);
          scrollToBottom();
        }, 1000 + Math.random() * 1000);
      }

      // Evento para el botón de enviar
      sendButton.addEventListener('click', () => {
        const message = messageInput.value.trim();
        if (message) {
          processUserMessage(message);
          messageInput.value = '';
          messageInput.focus();
        }
      });

      // Evento para la tecla Enter
      messageInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          const message = messageInput.value.trim();
          if (message) {
            processUserMessage(message);
            messageInput.value = '';
          }
        }
      });

      // Evento para los botones de sugerencia
      suggestionButtons.forEach(button => {
        button.addEventListener('click', () => {
          const question = button.getAttribute('data-question');
          messageInput.value = question;
          processUserMessage(question);
          messageInput.value = '';
        });
      });

      // Inicializar la hora actual en los mensajes existentes
      document.addEventListener('DOMContentLoaded', () => {
        const timeElements = document.querySelectorAll('.time');
        timeElements.forEach(el => {
          el.textContent = getCurrentTime();
        });
        
        // Hacer scroll al final del chat al cargar
        setTimeout(scrollToBottom, 100);
      });
    </script>
    <!-- Circle progress -->
  </body>
</html>