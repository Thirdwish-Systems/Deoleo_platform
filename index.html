<!doctype html>
<html lang="en" class="h-100">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Deoleo - Portal de Recursos Humanos</title>
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="./images/favicon.png"
    />
    <link href="./css/style.css" rel="stylesheet" />
    <style>
      /* Control de visibilidad para la simulación LDAP */
      #ldap-status-container {
        display: none;
      }
      .loader-dots:after {
        content: ".";
        animation: dots 1.5s steps(5, end) infinite;
      }
      @keyframes dots {
        0%,
        20% {
          content: ".";
        }
        40% {
          content: "..";
        }
        60% {
          content: "...";
        }
        80%,
        100% {
          content: "";
        }
      }
    </style>
  </head>
  <body class="h-100">
    <div class="authincation h-100">
      <div class="container-fluid h-100">
        <div class="row justify-content-center h-100 align-items-center">
          <div class="col-md-6">
            <div class="authincation-content">
              <div class="row no-gutters">
                <div class="col-xl-12">
                  <div class="auth-form">
                    <div class="text-center mb-4">
                      <img
                        src="images/logo-color-cmyk-01--1-.webp"
                        alt="Deoleo"
                        class="deoleo-logo"
                      />
                    </div>
                    <h4
                      id="auth-title"
                      class="text-center mb-4 text-primary-login"
                    >
                      Portal de Recursos Humanos
                    </h4>

                    <div id="ldap-init-section" class="text-center">
                      <div class="alert alert-light border mb-4">
                        <p class="mb-1 text-muted">Sesión de red detectada:</p>
                        <h6 class="text-dark">
                          <strong>DEOLEO_GLOBAL</strong>
                        </h6>
                        <hr />
                        <p class="mb-0">
                          Usuario detectado:
                          <strong>Juan_Moleres_Vidalo</strong>
                        </p>
                      </div>

                      <div class="text-center mt-4">
                        <button
                          type="button"
                          onclick="simulateLdapAuth()"
                          class="btn btn-primary btn-block deoleo-primary"
                        >
                          Acceder con mi usuario de red
                        </button>
                      </div>
                    </div>

                    <div id="ldap-status-container" class="text-center py-4">
                      <div
                        class="spinner-border text-primary mb-3"
                        role="status"
                      ></div>
                      <h5 class="text-primary-login">
                        Validando en LDAP<span class="loader-dots"></span>
                      </h5>
                      <p class="text-muted">
                        Iniciando sesión segura en el Directorio Activo...
                      </p>
                    </div>

                    <div id="auth-footer" class="new-account mt-3">
                      <p>
                        ¿No es tu cuenta?
                        <a class="text-primary-login" href="#"
                          >Contactar con IT</a
                        >
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="./vendor/global/global.min.js"></script>
    <script src="./js/quixnav-init.js"></script>
    <script src="./js/custom.min.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const logo = document.querySelector(".deoleo-logo");
        setTimeout(() => {
          if (logo) logo.classList.add("visible");
        }, 200);
      });

      function simulateLdapAuth() {
        const initSection = document.getElementById("ldap-init-section");
        const statusContainer = document.getElementById(
          "ldap-status-container",
        );
        const footer = document.getElementById("auth-footer");
        const title = document.getElementById("auth-title");

        // Desaparece la información de entrada para simular el salto al servidor
        initSection.style.display = "none";
        footer.style.display = "none";
        title.innerHTML = "Autenticación LDAP";

        // Aparece el estado de carga/validación
        statusContainer.style.display = "block";

        // Simulación de tiempo de respuesta de red y redirección
        setTimeout(() => {
          window.location.href = "dasboard.html";
        }, 2000);
      }
    </script>
  </body>
</html>
